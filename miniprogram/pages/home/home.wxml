<view class="home-container">
  <view class="brand-header">
    <view class="header-content">
      <text class="date-badge">{{currentDate}}</text>
      <text class="main-title">ä»Šæ—¥é¤æ¡Œ</text>
      <text class="sub-quote">ä¸ºæ‚¨ç»Ÿç­¹ä¸€æ¡Œå¥½é¥­</text>
    </view>
  </view>

  <view class="selection-area">
    <view class="selection-group">
      <text class="group-label">å®¶é‡Œå‡ ä¸ªäººï¼Ÿ</text>
      <view class="card-stack count-stack">
        <view wx:for="{{adultCountOptions}}" wx:key="*this" class="curated-card {{adultCount === item ? 'is-active' : ''}}" data-count="{{item}}" bindtap="onAdultCountTap">
          <text class="card-text">{{item}} äºº</text>
        </view>
      </view>
    </view>
    <view class="selection-group">
      <text class="group-label">æƒ³åƒå‡ è¤å‡ ç´ ï¼Ÿ</text>
      <view class="combo-stack">
        <view wx:for="{{comboOptions}}" wx:key="label" class="combo-btn {{item.meatCount === meatCount && item.vegCount === vegCount ? 'is-active' : ''}}" data-meat="{{item.meatCount}}" data-veg="{{item.vegCount}}" bindtap="onComboTap">
          <text class="combo-text">{{item.label}}</text>
        </view>
      </view>
    </view>
    <view class="has-baby-row">
      <text class="has-baby-label">å®å®åŒè¡Œï¼Ÿ</text>
      <switch checked="{{hasBaby}}" bindchange="onHasBabyChange" color="#C1663E"/>
    </view>
    <view wx:if="{{hasBaby}}" class="selection-group baby-age-section">
      <text class="group-label">å®å®æœˆé¾„</text>
      <view class="baby-age-stack">
        <view wx:for="{{babyAgeOptions}}" wx:key="value" class="baby-age-card {{item.value === babyMonth ? 'is-active' : ''}}" data-value="{{item.value}}" bindtap="onBabyAgeTap">
          <text class="baby-age-card-label">{{item.label}}</text>
          <text class="baby-age-card-sub">{{item.sub}}</text>
        </view>
      </view>
    </view>
  </view>

  <view class="home-brand">
    <view class="brand-line"></view>
    <text class="brand-text">TableSync</text>
  </view>

  <view class="bottom-bar">
    <button class="premium-btn" bindtap="handleGenerate">çœ‹çœ‹ä»Šå¤©åƒä»€ä¹ˆ</button>
  </view>

  <!-- èœå•é¢„è§ˆå¼¹å±‚ -->
  <view class="menu-preview-mask" wx:if="{{showPreview}}" catchtap="closePreview">
    <view class="menu-preview-card" catchtap="">
      <view class="menu-preview-header">
        <text class="menu-preview-title">ä»Šæ—¥ç”¨é¤äººæ•°</text>
        <text class="menu-preview-count">{{previewCountText}}</text>
        <text class="menu-preview-combo" wx:if="{{previewComboName}}">ä»Šæ—¥å¥—é¤æ¨èï¼š{{previewComboName}}</text>
        <text class="menu-preview-balance" wx:if="{{previewBalanceTip}}">å£å‘³å¹³è¡¡å»ºè®®ï¼š{{previewBalanceTip}}</text>
      </view>
      <view class="menu-preview-label">ğŸ± ä»Šæ—¥èœå•</view>
      <view class="menu-preview-list">
        <block wx:for="{{previewMenuRows}}" wx:key="index">
          <view class="menu-preview-row {{item.showSharedHint ? 'has-baby-hint' : ''}}">
            <view class="menu-row-check-wrap" data-index="{{index}}" catchtap="onCheckRow">
              <view class="menu-row-checkbox {{item.checked ? 'checked' : ''}}" data-index="{{index}}">{{item.checked ? 'âœ“' : ''}}</view>
            </view>
            <view class="menu-row-content">
              <view class="menu-row-main">
                <text class="menu-row-adult">{{item.adultName}}</text>
                <text class="menu-row-plus" wx:if="{{item.babyName}}"> ï¼‹ </text>
                <text class="menu-row-baby" wx:if="{{item.babyName}}">{{item.babyName}}</text>
              </view>
              <text class="menu-row-shared-hint" wx:if="{{item.showSharedHint}}">ï¼ˆå¤§äººå­©å­å…±ç”¨åŸºåº•ï¼Œçœæ—¶çœåŠ›ï¼‰</text>
            </view>
          </view>
        </block>
      </view>
      <view class="menu-preview-actions">
        <button class="btn-shuffle" catchtap="handleShuffle">æ¢ä¸€æ¢</button>
        <button class="btn-replace" catchtap="handleReplaceUnchecked">æ¢æ‰æœªå‹¾é€‰</button>
        <button class="btn-confirm" catchtap="confirmAndGo">å¼€å§‹åšé¥­</button>
      </view>
    </view>
  </view>
</view>
