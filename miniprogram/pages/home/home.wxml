<view class="home-container">
  <view class="brand-header">
    <view class="header-content">
      <text class="date-badge">{{currentDate}}</text>
      <text class="main-title">Daily Nourish</text>
      <text class="sub-quote">为职场忙碌的你，定制一份家庭暖食</text>
    </view>
  </view>

  <!-- Pill Segmented Control：大人 / 宝宝 药丸式分段 -->
  <view class="member-pills-container">
    <view class="pills-track">
      <view class="pill-item {{activeMember === 'adult' ? 'is-active' : ''}}" bindtap="toggleMember" data-type="adult">
        <text class="pill-text">大人</text>
      </view>
      <view class="pill-divider"></view>
      <view class="pill-item {{activeMember === 'baby' ? 'is-active' : ''}}" bindtap="toggleMember" data-type="baby">
        <text class="pill-text">宝宝</text>
      </view>
    </view>
    <view wx:if="{{activeMember === 'baby'}}" class="baby-age-tag">
      <text class="baby-age-tag-label">宝宝月龄</text>
      <text class="baby-age-tag-value">{{babyMonth}} 月</text>
    </view>
    <view wx:if="{{activeMember === 'adult'}}" class="adult-count-section">
      <text class="group-label">用餐人数</text>
      <view class="card-stack count-stack">
        <view wx:for="{{adultCountOptions}}" wx:key="*this" class="curated-card {{adultCount === item ? 'is-active' : ''}}" data-count="{{item}}" bindtap="onAdultCountTap">
          <text class="card-text">{{item}} 人</text>
        </view>
      </view>
    </view>
  </view>

  <view class="selection-area">
    <view wx:if="{{activeMember === 'baby'}}" class="selection-group baby-age-section">
      <view class="baby-age-row">
        <slider min="6" max="36" step="1" value="{{babyMonth}}" activeColor="#C1663E" bindchange="onBabyMonthChange"/>
      </view>
      <text class="baby-age-hint">根据月龄调整辅食性状（泥/末/块）</text>
    </view>

    <view class="selection-group">
      <text class="group-label">Taste Preference / 口味偏好 {{activeMember === 'adult' ? '（大人）' : '（宝宝）'}}</text>
      <view class="card-stack">
        <view wx:for="{{activeMember === 'adult' ? adultTasteOptions : babyTasteOptions}}" wx:key="value" class="curated-card {{(activeMember === 'adult' ? adultTaste : babyTaste) === item.value ? 'is-active' : ''}}" data-value="{{item.value}}" bindtap="onTasteTap">
          <text class="card-icon">{{item.icon}}</text>
          <text class="card-text">{{item.label}}</text>
        </view>
      </view>
    </view>

    <view class="selection-group">
      <text class="group-label">Hero Ingredient / 主食材</text>
      <view class="card-stack">
        <view wx:for="{{meats}}" wx:key="value" class="curated-card {{selectedMeat === item.value ? 'is-active' : ''}}" data-value="{{item.value}}" bindtap="onMeatTap">
          <text class="card-icon">{{item.icon}}</text>
          <text class="card-text">{{item.label}}</text>
        </view>
      </view>
    </view>
  </view>

  <view class="home-brand">
    <view class="brand-line"></view>
    <text class="brand-text">TableSync</text>
  </view>

  <view class="bottom-bar">
    <button class="premium-btn" bindtap="handleGenerate">生成今日规划</button>
  </view>
</view>
