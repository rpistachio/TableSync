<view class="home-container">
  <view class="brand-header">
    <view class="header-content">
      <image
        class="brand-logo"
        src="cloud://cloud1-7g5mdmib90e9f670.636c-cloud1-7g5mdmib90e9f670-1401654193/logo/logo-remove-removebg-preview.png"
        mode="widthFix"
      />
      <text class="brand-slogan">Eat. Connect. Automate.</text>
    </view>
  </view>

  <view class="home-main">
    <!-- Zen Mode 全屏氛围背景层 -->
    <image
      wx:if="{{zenBgUrl || homeBgUrl}}"
      class="home-main-bg {{zenBgFading ? 'zen-bg-fading' : ''}}"
      src="{{zenBgUrl || homeBgUrl}}"
      mode="aspectFill"
    />
    <view class="home-main-overlay {{cookStatus === 'tired' ? 'overlay-tired' : ''}}"></view>
    <view class="home-main-content">
      <!-- 今日氛围卡片（Phase 2 填充天气/问候） -->
      <view class="vibe-card">
        <text class="vibe-date">{{currentDate}}</text>
        <text class="vibe-weather" wx:if="{{vibeWeather}}">{{vibeWeather}}</text>
        <text class="vibe-greeting">{{vibeGreeting}}</text>
      </view>

      <!-- ===== Zen Mode: 一键定晚饭 ===== -->
      <view class="zen-panel" wx:if="{{!showAdvanced}}">
        <view class="zen-main-btn" bindtap="onZenGo">
          <text class="zen-main-btn-text">想想吃什么</text>
        </view>

        <view class="zen-toggle-group">
          <view class="zen-toggle-row">
            <text class="zen-toggle-label">今天状态</text>
            <view class="zen-toggle-track">
              <view class="zen-toggle-item {{cookStatus === 'ok' ? 'is-active' : ''}}" data-value="ok" bindtap="onToggleCookStatus">
                <text class="zen-toggle-text">还行</text>
              </view>
              <view class="zen-toggle-item {{cookStatus === 'tired' ? 'is-active' : ''}}" data-value="tired" bindtap="onToggleCookStatus">
                <text class="zen-toggle-text">疲惫</text>
              </view>
            </view>
          </view>
        </view>
      </view>

  <!-- ===== 高级功能入口（默认隐藏） ===== -->
  <block wx:if="{{showAdvanced}}">
  <view class="zen-advanced-back" bindtap="onHideAdvanced">
    <text class="zen-advanced-back-icon">‹</text>
    <text class="zen-advanced-back-text">返回禅模式</text>
  </view>
  <!-- 导入赛博菜谱入口 -->
  <view class="feature-entry import-entry" bindtap="onGoImport">
    <view class="feature-icon-wrap import-icon-wrap">
      <text class="feature-icon">🔗</text>
    </view>
    <view class="feature-text-wrap">
      <text class="feature-title">导入赛博菜谱</text>
      <text class="feature-desc">截图小红书/抖音菜谱，AI 秒变可执行食谱</text>
    </view>
    <text class="feature-arrow">›</text>
  </view>

  <!-- 混合组餐入口 -->
  <view class="feature-entry mix-entry" bindtap="onGoMix">
    <view class="feature-icon-wrap mix-icon-wrap">
      <text class="feature-icon">🍳</text>
    </view>
    <view class="feature-text-wrap">
      <text class="feature-title">混合组餐</text>
      <text class="feature-desc">自由搭配原生 + 导入菜谱，一键统筹做饭</text>
    </view>
    <text class="feature-arrow">›</text>
  </view>

  <!-- 我的菜谱库入口 -->
  <view class="feature-entry myrecipes-entry" bindtap="onGoMyRecipes">
    <view class="feature-icon-wrap myrecipes-icon-wrap">
      <text class="feature-icon">📚</text>
    </view>
    <view class="feature-text-wrap">
      <text class="feature-title">我的菜谱库</text>
      <text class="feature-desc">过去做过的菜，今天继续做</text>
    </view>
    <text class="feature-arrow">›</text>
  </view>
  </block>

  <!-- 更多高级功能入口（Zen 模式下显示） -->
  <view class="zen-advanced-link" wx:if="{{!showAdvanced}}" bindtap="onShowAdvanced">
    <text>更多高级功能（导入）▾</text>
  </view>

  <view class="home-brand" bindlongpress="onDebugSyncCloud">
    <view class="brand-line"></view>
    <text class="brand-text">TableSync</text>
  </view>
  <view class="home-collection-entry" bindtap="onGoCollection">烟火集</view>
  </view>
  </view>

  <sticker-drop
    visible="{{showStickerDrop}}"
    stickerName="{{stickerDropName}}"
    stickerId="{{stickerDropId}}"
    bindclose="onStickerDropClose"
  />
</view>
