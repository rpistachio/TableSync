/* ============ 烟火集 · Zen Mode 手账视觉 (Phase 1.1) ============ */

.collection-page {
  /* 手账配色变量（页面级，不污染全局） */
  --paper: #F9F8F4;
  --ink: #3A3D40;
  --wood: #A69482;
  --seal: #9E3E32;
  --dust: rgba(0, 0, 0, 0.05);

  min-height: 100vh;
  padding: 32rpx 32rpx 100rpx;
  box-sizing: border-box;

  /* 纸张肌理 */
  background-color: var(--paper);
  background-image:
    radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.012) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(0, 0, 0, 0.008) 0%, transparent 45%),
    radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.006) 0%, transparent 60%);
  background-size: 120rpx 120rpx, 160rpx 160rpx, 100rpx 100rpx;
  background-repeat: repeat;
}

/* ============ 封面卡片 ============ */

.collection-cover {
  margin: 0 0 48rpx;
  padding: 48rpx 40rpx 40rpx;
  background: linear-gradient(170deg, rgba(255, 253, 250, 0.95) 0%, rgba(248, 244, 238, 0.9) 100%);
  border: 1rpx solid rgba(166, 148, 130, 0.22);
  border-radius: 16rpx;
  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.04), 0 2rpx 6rpx rgba(0, 0, 0, 0.03);
  text-align: center;
}

.collection-title {
  display: block;
  font-size: 48rpx;
  font-weight: 600;
  color: var(--ink);
  margin-bottom: 16rpx;
  font-family: "STKaiti", "KaiTi", "楷体", serif;
  letter-spacing: 14rpx;
  text-shadow: 0 1rpx 3rpx rgba(58, 61, 64, 0.1);
}

.collection-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20rpx;
  margin-bottom: 20rpx;
}

.collection-divider-line {
  width: 100rpx;
  height: 2rpx;
  background: linear-gradient(90deg, transparent 0%, var(--wood) 50%, transparent 100%);
  opacity: 0.55;
}

.collection-divider-dot {
  font-size: 22rpx;
  color: var(--seal);
  opacity: 0.65;
}

.collection-desc {
  display: block;
  font-size: 24rpx;
  color: var(--wood);
  letter-spacing: 2rpx;
  margin-bottom: 28rpx;
}

/* 进度圆点列 */
.collection-progress-dots {
  display: flex;
  justify-content: center;
  gap: 16rpx;
  margin-bottom: 16rpx;
}

.progress-dot {
  width: 20rpx;
  height: 20rpx;
  border-radius: 50%;
  border: 2rpx solid rgba(166, 148, 130, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.progress-dot.is-lit {
  border-color: var(--seal);
  background: var(--seal);
  box-shadow: 0 0 8rpx rgba(158, 62, 50, 0.3);
}

.progress-dot-inner {
  width: 8rpx;
  height: 8rpx;
  border-radius: 50%;
}

.progress-dot.is-lit .progress-dot-inner {
  background: rgba(255, 255, 255, 0.85);
}

.collection-progress-text {
  display: block;
  font-size: 22rpx;
  font-weight: 600;
  color: var(--seal);
  letter-spacing: 4rpx;
}

/* ============ 口味画像卡片 ============ */

.taste-portrait {
  margin: 0 0 48rpx;
  padding: 36rpx 36rpx 32rpx;
  background: linear-gradient(170deg, rgba(255, 253, 250, 0.95) 0%, rgba(248, 244, 238, 0.9) 100%);
  border: 1rpx solid rgba(166, 148, 130, 0.22);
  border-radius: 16rpx;
  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.04), 0 2rpx 6rpx rgba(0, 0, 0, 0.03);
}

.taste-portrait-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  margin-bottom: 28rpx;
}

.taste-portrait-title {
  font-size: 34rpx;
  font-weight: 600;
  color: var(--ink);
  font-family: "STKaiti", "KaiTi", "楷体", serif;
  letter-spacing: 6rpx;
}

.taste-portrait-cooks {
  font-size: 22rpx;
  color: var(--seal);
  font-weight: 500;
  background: rgba(158, 62, 50, 0.08);
  padding: 4rpx 16rpx;
  border-radius: 20rpx;
}

.taste-section-label {
  display: block;
  font-size: 22rpx;
  color: var(--wood);
  margin-bottom: 14rpx;
  letter-spacing: 2rpx;
}

.taste-bars {
  margin-bottom: 24rpx;
}

.taste-bar-row {
  display: flex;
  align-items: center;
  gap: 16rpx;
  margin-bottom: 10rpx;
}

.taste-bar-label {
  font-size: 24rpx;
  color: var(--ink);
  width: 80rpx;
  flex-shrink: 0;
  text-align: right;
}

.taste-bar-track {
  flex: 1;
  height: 14rpx;
  background: rgba(166, 148, 130, 0.12);
  border-radius: 7rpx;
  overflow: hidden;
}

.taste-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--seal), rgba(158, 62, 50, 0.6));
  border-radius: 7rpx;
  min-width: 10%;
  transition: width 0.6s ease-out;
}

.taste-tags {
  margin-bottom: 24rpx;
}

.taste-tag-list {
  display: flex;
  flex-wrap: wrap;
  gap: 12rpx;
}

.taste-tag {
  font-size: 24rpx;
  color: var(--ink);
  background: rgba(249, 248, 244, 0.95);
  border: 1rpx solid rgba(166, 148, 130, 0.25);
  padding: 6rpx 20rpx;
  border-radius: 20rpx;
}

.taste-tag-avoid {
  color: var(--seal);
  border-color: rgba(158, 62, 50, 0.2);
  background: rgba(158, 62, 50, 0.06);
}

.taste-avoid {
  margin-bottom: 0;
}

/* ============ 散落式网格 ============ */

.collection-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 32rpx 24rpx;
  justify-content: center;
  align-items: flex-start;
}

/* ============ 贴纸卡片 ============ */

.sticker-cell {
  width: calc(50% - 12rpx);
  max-width: 320rpx;
  padding: 32rpx 16rpx 24rpx;
  border-radius: 12rpx;
  position: relative;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  box-sizing: border-box;
}

/* 未获得：虚线边框 + 极淡灰底 */
.sticker-cell:not(.is-earned) {
  background: rgba(246, 245, 243, 0.9);
  border: 2rpx dashed rgba(166, 148, 130, 0.3);
}

/* 已获得：和纸质感 + 烟尘投影 */
.sticker-cell.is-earned {
  background: linear-gradient(165deg, rgba(252, 250, 247, 0.98) 0%, rgba(248, 246, 242, 0.95) 100%);
  border: 1rpx solid rgba(166, 148, 130, 0.2);
  box-shadow: 0 4rpx 12rpx var(--dust), 0 2rpx 6rpx var(--dust);
}

/* 胶带装饰（已获得卡片） */
.sticker-cell.is-earned.tape-left::after {
  content: '';
  position: absolute;
  top: -6rpx;
  left: 20rpx;
  width: 72rpx;
  height: 24rpx;
  background: rgba(166, 148, 130, 0.25);
  transform: rotate(-4deg);
  border-radius: 2rpx;
}

.sticker-cell.is-earned.tape-right::after {
  content: '';
  position: absolute;
  top: -6rpx;
  right: 20rpx;
  width: 72rpx;
  height: 24rpx;
  background: rgba(166, 148, 130, 0.25);
  transform: rotate(4deg);
  border-radius: 2rpx;
}

.sticker-cell-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10rpx;
}

/* ============ 贴纸图标容器（放大 + 去红底） ============ */

.sticker-seal-wrap {
  width: 160rpx;
  height: 160rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-bottom: 8rpx;
}

/* 已获得：淡暖底 + 茜红细边框（不遮挡 icon） */
.sticker-cell.is-earned .sticker-seal-wrap {
  background: rgba(253, 248, 242, 0.9);
  border: 2rpx solid rgba(158, 62, 50, 0.25);
  box-shadow:
    0 2rpx 8rpx rgba(158, 62, 50, 0.1),
    0 4rpx 16rpx rgba(0, 0, 0, 0.05);
}

/* 未获得：空心圆 + 虚线 */
.sticker-cell:not(.is-earned) .sticker-seal-wrap {
  background: rgba(249, 248, 244, 0.6);
  border: 2rpx dashed rgba(166, 148, 130, 0.35);
}

.sticker-cell-img {
  width: 120rpx;
  height: 120rpx;
  border-radius: 50%;
}

.sticker-cell-emoji {
  font-size: 68rpx;
  line-height: 1;
}

.sticker-cell:not(.is-earned) .sticker-cell-emoji {
  opacity: 0.35;
}

.sticker-cell:not(.is-earned) .sticker-cell-img {
  opacity: 0.45;
  filter: grayscale(0.6);
}

.sticker-cell-name {
  font-size: 26rpx;
  font-weight: 600;
  color: var(--ink);
}

.sticker-cell:not(.is-earned) .sticker-cell-name {
  color: var(--wood);
  opacity: 0.85;
}

.sticker-cell-desc {
  font-size: 20rpx;
  color: var(--wood);
  text-align: center;
  line-height: 1.45;
  opacity: 0.9;
}

.sticker-cell-count {
  font-size: 18rpx;
  font-weight: 600;
  color: var(--seal);
  background: rgba(158, 62, 50, 0.08);
  padding: 4rpx 14rpx;
  border-radius: 20rpx;
}
