<view class="fridge-page">
  <!-- 输入区 -->
  <view class="fridge-input-bar">
    <input
      class="fridge-input"
      placeholder="输入食材（如：牛肉 鸡腿 虾）"
      placeholder-class="fridge-input-placeholder"
      value="{{inputText}}"
      bindinput="onInputChange"
      confirm-type="send"
      bindconfirm="onInputConfirm"
    />
    <view class="fridge-storage-toggle" bindtap="onStorageToggle">
      <text class="fridge-storage-label {{storageType === 'fridge' ? 'is-active' : ''}}">冷藏</text>
      <text class="fridge-storage-divider">|</text>
      <text class="fridge-storage-label {{storageType === 'freezer' ? 'is-active' : ''}}">冷冻</text>
    </view>
    <view class="fridge-add-btn" bindtap="onAddItems">
      <text class="fridge-add-btn-text">入库</text>
    </view>
  </view>

  <!-- 食材列表 -->
  <view class="fridge-list" wx:if="{{!isEmpty}}">
    <view
      class="fridge-item urgency-{{item.urgency}}"
      wx:for="{{items}}"
      wx:key="id"
    >
      <view class="fridge-item-main" bindtap="onToggleItemStorage" data-id="{{item.id}}">
        <text class="fridge-item-icon">{{item.icon}}</text>
        <text class="fridge-item-name">{{item.name}}</text>
        <text class="fridge-item-storage">{{item.storageLabel}}</text>
      </view>
      <view class="fridge-item-expiry" catchtap="onEditExpiry" data-id="{{item.id}}" data-days="{{item.daysLeft}}" data-name="{{item.name}}">
        <text class="fridge-item-status">{{item.statusText}}</text>
        <text class="fridge-item-edit-hint">✎</text>
      </view>
      <view class="fridge-item-delete" catchtap="onRemoveItem" data-id="{{item.id}}">
        <text class="fridge-item-delete-icon">×</text>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="fridge-empty" wx:if="{{isEmpty}}">
    <text class="fridge-empty-icon">🧊</text>
    <text class="fridge-empty-text">冰箱空空的</text>
    <text class="fridge-empty-hint">在上方输入食材，AI 会帮你优先安排临期的</text>
  </view>

  <!-- 临期摘要 -->
  <view class="fridge-expiring-banner" wx:if="{{expiringCount > 0}}">
    <text class="fridge-expiring-icon">⏰</text>
    <text class="fridge-expiring-text">{{expiringNames}} 快过期了，做掉它们</text>
  </view>

  <!-- 底部提示 -->
  <view class="fridge-footer" wx:if="{{!isEmpty}}">
    <text class="fridge-footer-text">点食材切换冷藏/冷冻 · 点天数可自定义保质期</text>
  </view>

  <!-- 底部 CTA：生成菜谱 -->
  <view class="fridge-cta-bar" wx:if="{{!isEmpty}}">
    <view class="fridge-cta-btn" bindtap="onGoGenerate">
      <text class="fridge-cta-text">用这些食材做饭</text>
    </view>
    <view class="fridge-cta-sub">
      <text class="fridge-cta-sub-text">AI 会优先安排冰箱里的食材</text>
    </view>
  </view>
</view>
