/* pages/mix/mix.wxss */
/* 混合组餐页面 —— 自由搭配原生 + 外部菜谱 */

.mix-container {
  min-height: 100vh;
  background: var(--bg);
  padding: 0 32rpx;
  padding-bottom: calc(env(safe-area-inset-bottom) + 280rpx);
  box-sizing: border-box;
}

/* ═══════════════════════════════════════ 顶部标题 */

.mix-header {
  padding: 48rpx 0 24rpx;
  text-align: center;
}

.mix-title {
  display: block;
  font-size: 40rpx;
  font-weight: 700;
  color: var(--text);
  letter-spacing: 2rpx;
  margin-bottom: 12rpx;
}

.mix-subtitle {
  display: block;
  font-size: 26rpx;
  color: var(--text-subtle);
  letter-spacing: 1rpx;
}

/* ═══════════════════════════════════════ 用餐人数 */

.people-section {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24rpx 28rpx;
  margin-bottom: 24rpx;
  background: var(--card-bg);
  border-radius: 24rpx;
  border: 1rpx solid var(--line-strong);
}

.people-label {
  font-size: 28rpx;
  font-weight: 500;
  color: var(--text-soft);
}

.people-stepper {
  display: flex;
  align-items: center;
  gap: 24rpx;
}

.stepper-btn {
  width: 56rpx;
  height: 56rpx;
  border-radius: 50%;
  background: var(--card-bg-strong);
  border: 2rpx solid var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
}

.stepper-btn.disabled {
  border-color: var(--line-strong);
  opacity: 0.4;
}

.stepper-btn-text {
  font-size: 32rpx;
  color: var(--accent);
  font-weight: 500;
  line-height: 1;
}

.stepper-btn.disabled .stepper-btn-text {
  color: var(--text-subtle);
}

.stepper-value {
  font-size: 30rpx;
  font-weight: 600;
  color: var(--text);
  min-width: 80rpx;
  text-align: center;
}

/* ═══════════════════════════════════════ 区块标题 */

.section-header {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 20rpx;
}

.section-title {
  font-size: 30rpx;
  font-weight: 600;
  color: var(--text);
  letter-spacing: 1rpx;
}

.section-badge {
  font-size: 22rpx;
  color: var(--accent);
  background: var(--accent-soft);
  padding: 4rpx 16rpx;
  border-radius: 100rpx;
  font-weight: 500;
}

.clear-all-btn {
  margin-left: auto;
  padding: 8rpx 20rpx;
  border-radius: 100rpx;
  background: rgba(200, 60, 60, 0.06);
}

.clear-all-text {
  font-size: 22rpx;
  color: #c83c3c;
  font-weight: 500;
}

/* ═══════════════════════════════════════ 空状态 */

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 48rpx 0;
  gap: 16rpx;
}

.empty-icon {
  font-size: 64rpx;
  opacity: 0.5;
}

.empty-text {
  font-size: 28rpx;
  color: var(--text-muted);
  font-weight: 500;
}

.empty-hint {
  font-size: 24rpx;
  color: var(--text-subtle);
}

/* ═══════════════════════════════════════ 已选菜谱列表 */

.selected-section {
  padding: 24rpx 0;
}

.selected-list {
  display: flex;
  flex-direction: column;
  gap: 16rpx;
}

.recipe-card {
  background: var(--card-bg-strong);
  border-radius: 24rpx;
  border: 1rpx solid var(--line-strong);
  overflow: hidden;
  box-shadow: 0 4rpx 16rpx var(--shadow);
}

.recipe-card-main {
  display: flex;
  align-items: center;
  padding: 24rpx 24rpx;
}

.recipe-card-left {
  flex: 1;
  min-width: 0;
}

.recipe-card-name {
  display: block;
  font-size: 30rpx;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 10rpx;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.recipe-card-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10rpx;
}

.recipe-card-source {
  font-size: 20rpx;
  font-weight: 500;
  padding: 4rpx 14rpx;
  border-radius: 100rpx;
}

.recipe-card-source-native {
  color: #5a9e6f;
  background: rgba(90, 158, 111, 0.1);
}

.recipe-card-source-external {
  color: var(--accent-strong);
  background: var(--accent-soft);
}

.recipe-card-tag {
  font-size: 20rpx;
  color: var(--text-muted);
  padding: 4rpx 12rpx;
  border-radius: 100rpx;
  background: var(--line);
}

.recipe-card-remove {
  width: 56rpx;
  height: 56rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-left: 12rpx;
  background: rgba(200, 60, 60, 0.06);
  border-radius: 50%;
}

.recipe-card-remove-icon {
  font-size: 36rpx;
  color: #c83c3c;
  font-weight: 300;
  line-height: 1;
}

/* ═══════════════════════════════════════ 添加按钮 */

.add-section {
  padding: 12rpx 0 24rpx;
}

.add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12rpx;
  padding: 28rpx 0;
  border-radius: 24rpx;
  border: 2rpx dashed var(--line-strong);
  background: var(--bg);
  transition: all 0.2s ease;
}

.add-btn:active {
  background: var(--accent-soft-2);
  border-color: var(--accent);
}

.add-btn-icon {
  font-size: 40rpx;
  color: var(--accent);
  font-weight: 300;
  line-height: 1;
}

.add-btn-text {
  font-size: 28rpx;
  color: var(--text-muted);
  font-weight: 500;
}

/* ═══════════════════════════════════════ 统筹预览 */

.schedule-section {
  padding: 24rpx 0 16rpx;
  border-top: 1rpx solid var(--line);
}

/* ─── 效率徽章 */

.efficiency-badge {
  margin-left: auto;
  padding: 4rpx 18rpx;
  border-radius: 100rpx;
  background: linear-gradient(135deg, rgba(90, 180, 90, 0.12) 0%, rgba(60, 160, 60, 0.06) 100%);
  border: 1rpx solid rgba(90, 180, 90, 0.2);
}

.efficiency-badge-text {
  font-size: 22rpx;
  font-weight: 600;
  color: #3c8c3c;
}

/* ─── 核心数据卡片 */

.schedule-grid {
  display: flex;
  gap: 12rpx;
  margin-bottom: 20rpx;
}

.schedule-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 22rpx 12rpx 18rpx;
  border-radius: 20rpx;
  border: 1rpx solid var(--accent-border);
  position: relative;
}

.schedule-item-time {
  background: linear-gradient(135deg, var(--accent-soft) 0%, var(--accent-soft-2) 100%);
}

.schedule-item-stove {
  background: linear-gradient(135deg, rgba(120, 160, 200, 0.1) 0%, rgba(100, 140, 180, 0.04) 100%);
  border-color: rgba(120, 160, 200, 0.2);
}

.schedule-item-save {
  background: linear-gradient(135deg, rgba(90, 180, 90, 0.1) 0%, rgba(60, 160, 60, 0.04) 100%);
  border-color: rgba(90, 180, 90, 0.2);
}

.schedule-value {
  font-size: 40rpx;
  font-weight: 700;
  color: var(--accent);
  line-height: 1;
}

.schedule-item-stove .schedule-value {
  color: #5A8CB4;
}

.schedule-item-save .schedule-value {
  color: #3c8c3c;
}

.schedule-unit {
  font-size: 20rpx;
  color: var(--text-subtle);
  margin-top: 4rpx;
  margin-bottom: 4rpx;
}

.schedule-label {
  font-size: 22rpx;
  color: var(--text-muted);
  letter-spacing: 0.5rpx;
}

/* ─── 设备需求标签 */

.schedule-devices {
  display: flex;
  flex-wrap: wrap;
  gap: 12rpx;
  margin-bottom: 20rpx;
}

.schedule-device-tag {
  display: flex;
  align-items: center;
  gap: 6rpx;
  padding: 8rpx 20rpx;
  border-radius: 100rpx;
  background: var(--card-bg);
  border: 1rpx solid var(--line-strong);
}

.schedule-device-name {
  font-size: 24rpx;
  color: var(--text-soft);
  font-weight: 500;
}

.schedule-device-count {
  font-size: 22rpx;
  color: var(--accent);
  font-weight: 600;
}

/* ─── 烹饪顺序时间线 */

.cooking-timeline {
  margin-bottom: 20rpx;
  padding: 20rpx 24rpx;
  background: var(--card-bg-strong);
  border-radius: 24rpx;
  border: 1rpx solid var(--line-strong);
  box-shadow: 0 4rpx 16rpx var(--shadow);
}

.timeline-title {
  margin-bottom: 16rpx;
}

.timeline-title-text {
  font-size: 26rpx;
  font-weight: 600;
  color: var(--text-soft);
  letter-spacing: 1rpx;
}

.timeline-list {
  display: flex;
  flex-direction: column;
}

.timeline-item {
  display: flex;
  gap: 16rpx;
  min-height: 80rpx;
}

.timeline-dot-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-shrink: 0;
  width: 52rpx;
}

.timeline-dot {
  width: 44rpx;
  height: 44rpx;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-soft) 0%, var(--accent-soft-2) 100%);
  border: 2rpx solid var(--accent-border);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.timeline-dot-icon {
  font-size: 22rpx;
  line-height: 1;
}

.timeline-line {
  width: 3rpx;
  flex: 1;
  min-height: 24rpx;
  background: linear-gradient(180deg, rgba(232, 168, 124, 0.3) 0%, rgba(232, 168, 124, 0.08) 100%);
  margin: 6rpx 0;
}

.timeline-content {
  flex: 1;
  min-width: 0;
  padding-bottom: 20rpx;
}

.timeline-item:last-child .timeline-content {
  padding-bottom: 4rpx;
}

.timeline-phase-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6rpx;
}

.timeline-phase {
  font-size: 26rpx;
  font-weight: 600;
  color: var(--text);
  line-height: 1.4;
}

.timeline-time {
  font-size: 22rpx;
  font-weight: 500;
  color: var(--accent);
  white-space: nowrap;
  flex-shrink: 0;
  margin-left: 12rpx;
}

.timeline-dishes {
  display: block;
  font-size: 24rpx;
  color: var(--text-soft);
  line-height: 1.5;
  margin-bottom: 4rpx;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.timeline-note {
  display: block;
  font-size: 22rpx;
  color: var(--text-subtle);
  line-height: 1.4;
}

/* ─── 智能建议 */

.schedule-tips {
  display: flex;
  flex-direction: column;
  gap: 10rpx;
  padding: 16rpx 20rpx;
  background: var(--accent-soft-2);
  border-radius: 16rpx;
  border: 1rpx solid var(--accent-border);
}

.schedule-tip {
  display: flex;
  align-items: flex-start;
  gap: 10rpx;
}

.schedule-tip-icon {
  font-size: 22rpx;
  flex-shrink: 0;
  line-height: 1.7;
}

.schedule-tip-text {
  font-size: 24rpx;
  color: var(--text-soft);
  line-height: 1.7;
}

/* ═══════════════════════════════════════ 底部操作栏 */

.bottom-actions {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 24rpx 32rpx calc(env(safe-area-inset-bottom) + 16rpx);
  background: var(--bg);
  box-shadow: 0 -8rpx 24rpx var(--shadow);
  display: flex;
  flex-direction: column;
  gap: 16rpx;
  z-index: 100;
}

.action-btn {
  width: 100%;
  height: 96rpx;
  line-height: 96rpx;
  border-radius: 100rpx;
  font-size: 30rpx;
  font-weight: 500;
  letter-spacing: 2rpx;
  border: none;
  transition: transform 0.2s ease;
}

.action-btn:active {
  transform: scale(0.96);
}

.action-btn-primary {
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent) 100%);
  color: var(--text-inverse);
  box-shadow: 0 12rpx 32rpx rgba(212, 149, 106, 0.35);
}

.action-btn-text {
  color: var(--text-inverse);
}

.action-btn-secondary {
  background: var(--card-bg);
  border: 2rpx solid var(--accent);
  height: 88rpx;
  line-height: 88rpx;
}

.action-btn-secondary-text {
  color: var(--accent);
}

/* ═══════════════════════════════════════ 弹出面板 */

.panel-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 200;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.panel-mask.is-visible {
  opacity: 1;
  pointer-events: auto;
}

.add-panel {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg);
  border-radius: 32rpx 32rpx 0 0;
  z-index: 201;
  transform: translateY(100%);
  transition: transform 0.3s ease;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}

.add-panel.is-visible {
  transform: translateY(0);
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 28rpx 32rpx 16rpx;
  flex-shrink: 0;
}

.panel-title {
  font-size: 34rpx;
  font-weight: 700;
  color: var(--text);
  letter-spacing: 1rpx;
}

.panel-close {
  width: 56rpx;
  height: 56rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--line);
  border-radius: 50%;
}

.panel-close-icon {
  font-size: 36rpx;
  color: var(--text-muted);
  font-weight: 300;
  line-height: 1;
}

/* 标签页 */

.panel-tabs {
  display: flex;
  gap: 16rpx;
  padding: 12rpx 32rpx 20rpx;
  flex-shrink: 0;
}

.panel-tab {
  display: flex;
  align-items: center;
  gap: 8rpx;
  padding: 14rpx 28rpx;
  border-radius: 100rpx;
  background: var(--card-bg);
  border: 2rpx solid var(--line-strong);
  transition: all 0.2s ease;
}

.panel-tab.is-active {
  background: linear-gradient(135deg, var(--accent-soft) 0%, var(--accent-soft-2) 100%);
  border-color: var(--accent);
}

.panel-tab-icon {
  font-size: 26rpx;
}

.panel-tab-text {
  font-size: 26rpx;
  color: var(--text-muted);
  font-weight: 500;
}

.panel-tab.is-active .panel-tab-text {
  color: var(--accent);
  font-weight: 600;
}

/* 面板内容 */

.panel-content {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  padding: 0 32rpx;
}

/* 过滤标签栏 */

.filter-bar {
  white-space: nowrap;
  margin-bottom: 16rpx;
  flex-shrink: 0;
}

.filter-bar-inner {
  display: inline-flex;
  gap: 12rpx;
  padding: 4rpx 0;
}

.filter-tag {
  padding: 12rpx 24rpx;
  border-radius: 100rpx;
  background: var(--card-bg);
  border: 1rpx solid var(--line-strong);
  flex-shrink: 0;
}

.filter-tag.is-active {
  background: var(--accent);
  border-color: var(--accent);
}

.filter-tag-text {
  font-size: 24rpx;
  color: var(--text-muted);
  font-weight: 500;
}

.filter-tag.is-active .filter-tag-text {
  color: var(--text-inverse);
}

/* 菜谱选择列表 */

.recipe-scroll {
  flex: 1;
  min-height: 0;
  max-height: 50vh;
}

.recipe-pick-list {
  display: flex;
  flex-direction: column;
  gap: 2rpx;
}

.recipe-pick-item {
  display: flex;
  align-items: center;
  padding: 24rpx 20rpx;
  background: var(--card-bg-strong);
  border-radius: 16rpx;
  margin-bottom: 8rpx;
  border: 1rpx solid var(--line);
  transition: background 0.15s ease;
}

.recipe-pick-item:active {
  background: var(--accent-soft-2);
}

.recipe-pick-info {
  flex: 1;
  min-width: 0;
}

.recipe-pick-name {
  display: block;
  font-size: 28rpx;
  font-weight: 500;
  color: var(--text);
  margin-bottom: 6rpx;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.recipe-pick-meta {
  display: flex;
  gap: 8rpx;
}

.recipe-pick-meta-tag {
  font-size: 20rpx;
  color: var(--text-subtle);
  padding: 2rpx 10rpx;
  border-radius: 100rpx;
  background: var(--line);
}

.recipe-pick-meta-external {
  color: var(--accent-strong);
  background: var(--accent-soft-2);
}

.recipe-pick-add {
  font-size: 40rpx;
  color: var(--accent);
  font-weight: 300;
  line-height: 1;
  flex-shrink: 0;
  width: 56rpx;
  height: 56rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: var(--accent-soft);
}

.recipe-pick-empty {
  padding: 48rpx 0;
  text-align: center;
}

.recipe-pick-empty-text {
  font-size: 26rpx;
  color: var(--text-subtle);
}

/* 导入新菜谱入口 */

.import-new-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10rpx;
  padding: 24rpx 0;
  margin: 16rpx 0 24rpx;
  border-radius: 20rpx;
  border: 2rpx dashed var(--line-strong);
  background: var(--bg);
  flex-shrink: 0;
}

.import-new-btn:active {
  background: var(--accent-soft-2);
  border-color: var(--accent);
}

.import-new-icon {
  font-size: 28rpx;
}

.import-new-text {
  font-size: 26rpx;
  color: var(--text-muted);
  font-weight: 500;
}
