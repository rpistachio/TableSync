<view class="preview-page {{largeTextMode ? 'large-text-mode' : ''}}">
  <scroll-view class="preview-page-scroll" scroll-y>
    <view class="preview-scroll-content">
      <view class="preview-top-bar">
        <view class="preview-top-bar-spacer"></view>
        <view class="preview-large-mode-btn {{largeTextMode ? 'is-active' : ''}}" bindtap="onLargeTextModeTap">
          <text class="preview-large-mode-icon">ğŸ”¤</text>
          <text class="preview-large-mode-label">{{largeTextMode ? 'é€€å‡ºå¤§å­—' : 'å¤§å­—æ¨¡å¼'}}</text>
        </view>
      </view>
      <view class="preview-header">
        <text class="preview-heading">ä»Šæ—¥ç”¨é¤</text>
        <text class="preview-count">{{previewCountText}}</text>
        <text class="preview-combo" wx:if="{{previewComboName}}">{{previewComboName}}</text>
        <text class="preview-balance" wx:if="{{previewBalanceTip}}">{{previewBalanceTip}}</text>
      </view>
      
      <!-- èœè°±æ± é™çº§æç¤º -->
      <view class="preview-fallback-notice" wx:if="{{previewFallbackMessage}}">
        <text class="fallback-icon">ğŸ’¡</text>
        <text class="fallback-text">{{previewFallbackMessage}}</text>
      </view>

      <view class="preview-dashboard" wx:if="{{previewDashboard.estimatedTime || previewDashboard.stoveCount > 0 || previewDashboard.categoryLabels}}">
        <view class="dashboard-row">
          <view class="dashboard-item">
            <text class="dashboard-icon">â°</text>
            <text class="dashboard-label">é¢„è®¡è€—æ—¶</text>
            <text class="dashboard-value">{{previewDashboard.estimatedTime}}</text>
          </view>
          <view class="dashboard-item">
            <text class="dashboard-icon">ğŸ”¥</text>
            <text class="dashboard-label">ç¶å°å ç”¨</text>
            <text class="dashboard-value">{{previewDashboard.stoveCount}} ä¸ªç«</text>
          </view>
        </view>
        <view class="dashboard-item dashboard-item-full" wx:if="{{previewDashboard.categoryLabels}}">
          <text class="dashboard-icon">ğŸ¥•</text>
          <text class="dashboard-label">é£Ÿæç§ç±»</text>
          <text class="dashboard-value dashboard-value-wrap">{{previewDashboard.categoryLabels}}</text>
        </view>
      </view>

      <view class="preview-hints" wx:if="{{previewDashboard.nutritionHint || previewDashboard.prepOrderHint || previewDashboard.prepAheadHint || previewDashboard.sharedIngredientsHint}}">
        <view class="hint-row" wx:if="{{previewDashboard.sharedIngredientsHint}}">
          <text class="hint-icon">ğŸ›’</text>
          <text class="hint-text">{{previewDashboard.sharedIngredientsHint}}</text>
        </view>
        <view class="hint-row" wx:if="{{previewDashboard.nutritionHint}}">
          <text class="hint-icon">ğŸ¥—</text>
          <text class="hint-text">{{previewDashboard.nutritionHint}}</text>
        </view>
        <view class="hint-row" wx:if="{{previewDashboard.prepAheadHint}}">
          <text class="hint-icon">â±</text>
          <text class="hint-text">{{previewDashboard.prepAheadHint}}</text>
        </view>
        <view class="hint-row" wx:if="{{previewDashboard.prepOrderHint}}">
          <text class="hint-icon">ğŸ“‹</text>
          <text class="hint-text">{{previewDashboard.prepOrderHint}}</text>
        </view>
      </view>

      <view class="preview-baby-diff" wx:if="{{previewHasSharedBase}}">
        <text class="preview-baby-diff-icon">ğŸ’¡</text>
        <text class="preview-baby-diff-text">å¤§äººå­©å­å¯å…±ç”¨åŸºåº•ï¼Œä¸€é”…å‡ºçœæ—¶çœåŠ›</text>
      </view>

      <view class="preview-menu-label">ğŸ± ä»Šæ—¥èœå•</view>
      <view class="preview-baby-hint" wx:if="{{previewHasBaby}}">ğŸ‘¶ ä¸‹æ–¹æ ‡ã€Œå®å®ã€çš„ä¸ºå®å®è¾…é£Ÿ</view>

      <view class="preview-dish-list">
        <view wx:for="{{previewMenuRows}}" wx:key="index" class="dish-card-wrap" data-index="{{index}}" bindtap="onCheckRow">
          <view class="dish-card {{item.checked ? '' : 'dish-card-unchecked'}}">
            <view class="dish-card-check">{{item.checked ? 'âœ“' : ''}}</view>
            <view class="dish-card-content">
              <view class="dish-card-names">
                <view class="dish-card-adult-row">
                  <text wx:if="{{item.babyName}}" class="dish-card-role-tag adult-tag">å¤§äºº</text>
                  <text class="dish-card-main">{{item.adultName}}</text>
                </view>
                <view wx:if="{{item.babyName}}" class="dish-card-baby-row">
                  <text class="dish-card-role-tag baby-tag">å®å®</text>
                  <text class="dish-card-baby-name">{{item.babyName}}</text>
                </view>
                <text wx:if="{{item.sameAsAdultHint}}" class="dish-card-same-hint">{{item.sameAsAdultHint}}</text>
              </view>
              <text class="dish-card-reason" wx:if="{{item.recommendReason}}">{{item.recommendReason}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <view class="preview-actions">
    <button class="preview-btn preview-btn-secondary" catchtap="handleShuffle">æ¢ä¸€æ¢</button>
    <button class="preview-btn preview-btn-secondary" catchtap="handleReplaceUnchecked">æ¢æ‰æœªå‹¾é€‰</button>
    <button class="preview-btn preview-btn-primary" catchtap="confirmAndGo">å¼€å§‹åšé¥­</button>
  </view>
</view>
